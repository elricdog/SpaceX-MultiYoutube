<!DOCTYPE html>
<html lang="en">
<head>
	<title>SpaceX Board</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
	<link rel="icon" href="./favicon.ico" type="image/x-icon"/>
	<link rel="shortcut icon" href="./favicon.ico" type="image/x-icon"/>
	<link rel="manifest" href="./manifest.webmanifest">
	<link type="text/css" rel="stylesheet" href="main_beta.css">
	<link rel="stylesheet" href="https://cdn.metroui.org.ua/v4.4.3/css/metro-all.min.css">
	<script src="https://cdn.metroui.org.ua/v4.4.3/js/metro.min.js"></script>
</head>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
</script>

<!-- Contact form (emailjs.com) -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@2/dist/email.min.js"/>
<script>
	(function(){
		emailjs.init("user_BjUMLZEqKE9VdA5391rv8");
	})();
</script>

<body>

<script src="./js/rss-marquee.js"></script>

<!-- Contact -->
<div id="contact" style="visibility:hidden; width: fit-content; height: fit-content;">
	<center>
	<h1>Contact</h1>
	Please, feel free to send any idea to improve this website. We will take in consideration as soon as posible, or later or never.
	</center>
	<br>
	<form id="contact-form">
        <input type="hidden" name="contact_number">
		<p>
        <label>Name</label>
        <input type="text" name="user_name" size="32" maxlength="32">
		<br>
        <label>Email</label>
        <input type="email" name="user_email" size="64" maxlength="128">
		</p>
        <label>Message</label>
		<div class="contactMessage">
        <textarea class="contactMessageText" name="message" rows="5"></textarea>
		</div>
		<br>
		<center>
		<button id="buttonContactSend" class="myButton">Send</button>
		<button id="buttonContactClose" class="myButton">Close</button>
		<br>
		<br>
		<label id="lblContactError" style="color:red;"></label>
	</form>
	<br>
	<label style="color:yellow;">(Still not work, under development)</label>
	</center>
</div>

<!-- About Us -->
<div id="aboutus" style="visibility:hidden; width: fit-content; height: fit-content;">
	<center>
	<h1>About Us</h1>
	<p>
	One day we see that browser tabs was not enough to follow Starship evolution...then...
	<br>
	<br>
	Elric and Sworied
	</p>
	<br>
	<button id="buttonAboutUsClose" class="myButton">Close</button>
	<br>
	<br>Link to this web:<br>
	<a href="https://elricdog.github.io/SpaceX-MultiYoutube/view.html">https://elricdog.github.io/SpaceX-MultiYoutube/view.html</a>
	<br>Link to BETA version (bugs and not stable):<br>
	<a href="https://elricdog.github.io/SpaceX-MultiYoutube/view_beta.html">https://elricdog.github.io/SpaceX-MultiYoutube/view_beta.html</a>
	<br>Link to OLD version (more simple):<br>
	<a href="https://elricdog.github.io/SpaceX-MultiYoutube/view_old.html">https://elricdog.github.io/SpaceX-MultiYoutube/view_old.html</a>
	<br>Source Code at GitHub:<br>
	<a href="https://github.com/elricdog/SpaceX-MultiYoutube">https://github.com/elricdog/SpaceX-MultiYoutube</a>
	</center>
</div>

<!-- To read local disk files -->
<div id="load" style="visibility:hidden; width: fit-content; height: fit-content;">
	<center>
	<h1>Select a Configuration File</h1>
	<p>
	<input type="file" id="load-file-input"/>
	</p>
	<br>
	<button id="buttonLoad" class="myButton">Select</button>
	<button id="buttonLoadClose" class="myButton">Close</button>
	</center>
</div>

<!-- Utilities -->
<script>
	function isMobile() {
        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
            return true;
		} else {
            return false;
		}
    }

	function fetchHeader(url, wch) {
		try {
			var req=new XMLHttpRequest();
			req.open("HEAD", url, false);
			req.send(null);
			if(req.status== 200){
				return req.getResponseHeader(wch);
			}
			else return false;
		} catch(er) {
			return er.message;
		}
	}

	function indexMatchingText(ele, text) {
		for (var i=0; i<ele.length;i++) {
			if (ele[i].childNodes[0].nodeValue === text){
				return i;
			}
		}
		return undefined;
	}

	function calcSplitSizes(a, b) {
		var w = a + b;
		a = ((a*100)/w);
		b = ((b*100)/w);
		return "" + a +", " + b;
	}
</script>

<!-- OnLoad and Icons -->
<script>
	window.onload = function() {
		document.getElementById('contact-form').addEventListener('submit', function(event) {
			event.preventDefault();
			// generate a five digit number for the contact_number variable
			this.contact_number.value = Math.random() * 100000 | 0;
			// these IDs from the previous steps
			emailjs.sendForm('contact_service', 'contact_form', this)
				.then(function() {
					console.log('SUCCESS!');
					toggleContact();
				}, function(error) {
					console.log('FAILED...', error);
					document.getElementById('lblContactError').innerHTML = 'FAILED(' + error.status +')...' + error.text;
				});
		});

		document.getElementById("iconOptions").addEventListener ("click", toggleIconGroups, false);
		document.getElementById("iconLastUpdate").addEventListener ("click", toggleLastUpdate, false);
		document.getElementById("iconTime").addEventListener ("click", toggleTimeGroups, false);
		document.getElementById("iconContact").addEventListener ("click", toggleContact, false);
		document.getElementById("buttonContactClose").addEventListener ("click", toggleContact, false);
		document.getElementById("iconAboutUs").addEventListener ("click", toggleAboutUs, false);
		document.getElementById("buttonAboutUsClose").addEventListener ("click", toggleAboutUs, false);
		document.getElementById("iconSave").addEventListener ("click", configurationSave, false);
		document.getElementById("iconLoad").addEventListener ("click", toggleLoad, false);
		document.getElementById("buttonLoadClose").addEventListener ("click", toggleLoad, false);
		document.getElementById("buttonLoad").addEventListener ("click", configurationLoad, false);
		document.getElementById("iconFullScreen").addEventListener ("click", toggleFullScreen, false);
		document.getElementById("iconRSS").addEventListener ("click", toggleRSSScroll, false);
		document.getElementById("icon5thColumn").addEventListener ("click", toggle5thColumn, false);
		document.getElementById("icon5thColumnB").addEventListener ("click", toggle5thColumn, false);

		const select1 = document.getElementById("selectCH1");
		const select2 = document.getElementById("selectCH2");
		const select3 = document.getElementById("selectCH3");
		const select4 = document.getElementById("selectCH4");
		const select5 = document.getElementById("selectCH5");
		var event = new Event('change');
		select1.selectedIndex = indexMatchingText(select1, "SpaceFlight");
		select2.selectedIndex = indexMatchingText(select2, "Lab Padre - Nerdle Cam 4K");
		select3.selectedIndex = indexMatchingText(select3, "Lab Padre - Sentinel Cam");
		select4.selectedIndex = indexMatchingText(select4, "Everyday Astronaut");
		select5.selectedIndex = indexMatchingText(select5, "My TWITTER SpaceX List");
		select1.dispatchEvent(event);
		select2.dispatchEvent(event);
		select3.dispatchEvent(event);
		select4.dispatchEvent(event);
		select5.dispatchEvent(event);

		const feedTextScrollUrl = ['https://elricdog.github.io/SpaceX-MultiYoutube/rss.xml'];
        const rssTextScroll = document.getElementById('rssTextScroll');
        new RSSMarquee(feedTextScrollUrl, rssTextScroll, { speed: 150 } );
		window.addEventListener('resize', () => {
			updateRSSTextScrollWidth();
		});
		updateRSSTextScrollWidth();

		toggleIconGroups();
		if (isMobile())
		{
			//toggleLastUpdate();
			toggleTimeGroups();
			//toggleRSSScroll();
			toggle5thColumn();
		}

		const lastUpdate = document.getElementById("lastUpdate");

		var lastModifiedDateString = fetchHeader(location.href,'Last-Modified');
		var lastModifiedDate = new Date();
		lastModifiedDate.setTime(Date.parse(lastModifiedDateString));
		var lastModifiedRSSDateString = fetchHeader(feedTextScrollUrl[0],'Last-Modified');
		var lastModifiedRSSDate = new Date();
		lastModifiedRSSDate.setTime(Date.parse(lastModifiedRSSDateString));
		if (lastModifiedDate>lastModifiedRSSDate) {
			lastUpdate.innerHTML = lastModifiedDate.toLocaleString();
			console.log("LastUpdate RSS: "+lastUpdate.innerHTML);
		} else {
			lastUpdate.innerHTML = lastModifiedRSSDate.toLocaleString();
			console.log("LastUpdate: "+lastUpdate.innerHTML);
		}
	};

    function updateRSSTextScrollWidth()
	{
		var w = document.getElementById('rowOfTopLeft').getBoundingClientRect().width;
		const rssTextScroll = document.getElementById('rssTextScroll');
		w2 = document.getElementById('selectCH1').getBoundingClientRect().width;
		var fw = (w-w2)-28; // Note: Button
		if (fw<50) fw=50;
		rssTextScroll.style.width = fw+"px";
	}

	function toggleContact() {
		const contactScreen = document.getElementById('contact');
		if (contactScreen.style.visibility == "hidden") {
			document.getElementById('lblContactError').innerHTML = "";
			contactScreen.style.visibility = "visible";
			contactScreen.style.height = "fit-content";
		} else {
			contactScreen.style.visibility = "hidden";
			contactScreen.style.height = "0px";
		}
	};

	function toggleAboutUs() {
		const aboutUsScreen = document.getElementById('aboutus');
		if (aboutUsScreen.style.visibility == "hidden") {
			aboutUsScreen.style.visibility = "visible";
			aboutUsScreen.style.height = "fit-content";
		} else {
			aboutUsScreen.style.visibility = "hidden";
			aboutUsScreen.style.height = "0px";
		}
	};

	function setRSSScroll(visible) {
		const rssTextScroll = document.getElementById('rssTextScroll');
		if (visible) {
			rssTextScroll.style.visibility = "visible";
			updateRSSTextScrollWidth();
		} else {
			rssTextScroll.style.visibility = "hidden";
			rssTextScroll.style.width = "0px";
		}
	}
	function toggleRSSScroll() {
		const rssTextScroll = document.getElementById('rssTextScroll');
		setRSSScroll(rssTextScroll.style.visibility == "hidden");
	}

	function setLastUpdate(visible) {
		const lastUpdateLabel = document.getElementById('groupLastUpdate');
		if (visible) {
			lastUpdateLabel.style.visibility = "visible";
			lastUpdateLabel.style.width = "auto";
		} else {
			lastUpdateLabel.style.visibility = "hidden";
			lastUpdateLabel.style.width = "0px";
		}
	};
	function toggleLastUpdate() {
		const lastUpdateLabel = document.getElementById('groupLastUpdate');
		setLastUpdate(lastUpdateLabel.style.visibility == "hidden");
	};

	function setTimeGroups(visible) {
		const timersIconLabels = document.getElementById('timersIconLabels');
		if (visible) {
			timersIconLabels.style.visibility = "visible";
			timersIconLabels.style.width = "auto";
		} else {
			timersIconLabels.style.visibility = "hidden";
			timersIconLabels.style.width = "0px";
		}
	};
	function toggleTimeGroups() {
		const timersIconLabels = document.getElementById('timersIconLabels');
		setTimeGroups(timersIconLabels.style.visibility == "hidden");
	};

	function toggleIconGroups() {
		const optionsIcons = document.getElementById('optionsIcons');
		if (optionsIcons.style.visibility == "hidden") {
			optionsIcons.style.visibility = "visible";
			optionsIcons.style.width = "auto";
		} else {
			optionsIcons.style.visibility = "hidden";
			optionsIcons.style.width = "0px";
		}
	}

	let last5thColumnSplitSizes = "80, 20";
	function preserve5thColumn() {
		// Preserve current SplitSizes
		const mainView = document.getElementById("mainView");
		const column5thView = document.getElementById('column5thView');
		var mainViewBounds = mainView.getBoundingClientRect();
		var column5thViewBounds = column5thView.getBoundingClientRect();
		splitter1SplitSizes = calcSplitSizes(mainViewBounds.width, column5thViewBounds.width);
		last5thColumnSplitSizes = splitter1SplitSizes;
	}

	function set5thColumn(visible, splitSizes) {
		const rootView = document.getElementById('rootView');
		const column5thView = document.getElementById('column5thView');
		if (visible) {
			column5thView.style.visibility = "visible";
			rootView.dataset.splitSizes = splitSizes;
		} else {
			column5thView.style.visibility = "hidden";
			rootView.dataset.splitSizes = "100, 0";
		}
		last5thColumnSplitSizes = splitSizes;
	}
	function toggle5thColumn() {
		const rootView = document.getElementById('rootView');
		const column5thView = document.getElementById('column5thView');
		if (column5thView.style.visibility == "hidden") {
			column5thView.style.visibility = "visible";
			rootView.dataset.splitSizes = last5thColumnSplitSizes;
		} else {
			column5thView.style.visibility = "hidden";
			preserve5thColumn();
			rootView.dataset.splitSizes = "100, 0";
		}
	}

	function toggleLoad() {
		const loadScreen = document.getElementById('load');
		if (loadScreen.style.visibility == "hidden") {
			loadScreen.style.visibility = "visible";
			loadScreen.style.height = "fit-content";
		} else {
			loadScreen.style.visibility = "hidden";
			loadScreen.style.height = "0px";
		}
	};

	function upload(file, fun) {
		let reader = new FileReader();
		reader.addEventListener('load', function(e) {
	    	let text = e.target.result;
			fun(text);
		});
		reader.readAsText(file);
	};

	function configurationLoad() {
		let file = document.getElementById("load-file-input").files[0];
		if (file === null) return;
		upload(file, function(text) {
			var data = JSON.parse(text);
			console.log("Configuration loaded");
			console.log(data);

			const select1 = document.getElementById("selectCH1");
			const select2 = document.getElementById("selectCH2");
			const select3 = document.getElementById("selectCH3");
			const select4 = document.getElementById("selectCH4");
			const select5 = document.getElementById("selectCH5");

			var event = new Event('change');
			select1.selectedIndex = indexMatchingText(select1, data["ch1"]);
			select2.selectedIndex = indexMatchingText(select2, data["ch2"]);
			select3.selectedIndex = indexMatchingText(select3, data["ch3"]);
			select4.selectedIndex = indexMatchingText(select4, data["ch4"]);
			select5.selectedIndex = indexMatchingText(select5, data["ch5"]);
			select1.dispatchEvent(event);
			select2.dispatchEvent(event);
			select3.dispatchEvent(event);
			select4.dispatchEvent(event);
			select5.dispatchEvent(event);

			var rssTextScrollVisible = data["rssTextScrollVisible"];
			var lastUpdateLabelVisible = data["lastUpdateLabelVisible"];
			var timersIconLabelsVisible = data["timersIconLabelsVisible"];

			setRSSScroll(rssTextScrollVisible);
			setLastUpdate(lastUpdateLabelVisible);
			setTimeGroups(timersIconLabelsVisible);

			const splitter1 = document.getElementById("rootView");
			const splitter2 = document.getElementById("mainView");
			const splitter3 = document.getElementById("mainView12");
			const splitter4 = document.getElementById("mainView34");

			splitter1.dataset.splitSizes = data["splitter1Sizes"];
			splitter2.dataset.splitSizes = data["splitter2Sizes"];
			splitter3.dataset.splitSizes = data["splitter3Sizes"];
			splitter4.dataset.splitSizes = data["splitter4Sizes"];

			var column5thViewVisible = data["column5thViewVisible"];
			set5thColumn(column5thViewVisible, splitter1.dataset.splitSizes);

			toggleLoad();
			console.log("Loaded OK");
		});
	};

	function download(data, filename, type) {
		var file = new Blob([data], {type: type});
		if (window.navigator.msSaveOrOpenBlob) // IE10+
			window.navigator.msSaveOrOpenBlob(file, filename);
		else { // Others
			var a = document.createElement("a"), url = URL.createObjectURL(file);
			a.href = url;
			a.download = filename;
			document.body.appendChild(a);
			a.click();
			setTimeout(function() {
				document.body.removeChild(a);
				window.URL.revokeObjectURL(url);
			}, 0);
		}
		console.log("Saved OK");
	};

	function configurationSave() {
		const select1 = document.getElementById("selectCH1");
		const select2 = document.getElementById("selectCH2");
		const select3 = document.getElementById("selectCH3");
		const select4 = document.getElementById("selectCH4");
		const select5 = document.getElementById("selectCH5");

		const rssTextScroll = document.getElementById('rssTextScroll');
		const rssTextScrollVisible = (rssTextScroll.style.visibility == "visible");
		const lastUpdateLabel = document.getElementById('groupLastUpdate');
		const lastUpdateLabelVisible = (lastUpdateLabel.style.visibility == "visible");
		const timersIconLabels = document.getElementById('timersIconLabels');
		const timersIconLabelsVisible = (timersIconLabels.style.visibility == "visible");

		const splitter1 = document.getElementById("rootView");
		const splitter3 = document.getElementById("mainView12");
		const splitter4 = document.getElementById("mainView34");

		const mainView = document.getElementById("mainView");
		const column5thView = document.getElementById("column5thView");
		const rowOfTopLeft = document.getElementById("rowOfTopLeft");
		const rowOfTopRight = document.getElementById("rowOfTopRight");
		const rowOfBottomLeft = document.getElementById("rowOfBottomLeft");
		const rowOfBottomRight = document.getElementById("rowOfBottomRight");

		var mainViewBounds = mainView.getBoundingClientRect();
		var column5thViewBounds = column5thView.getBoundingClientRect();
		var rowOfTopLeftBounds = rowOfTopLeft.getBoundingClientRect();
		var rowOfTopRightBounds = rowOfTopRight.getBoundingClientRect();
		var rowOfBottomLeftBounds = rowOfBottomLeft.getBoundingClientRect();
		var rowOfBottomRightBounds = rowOfBottomRight.getBoundingClientRect();

		// Compute relations between layers
		if (column5thView.style.visibility == "hidden") {
			splitter1SplitSizes = last5thColumnSplitSizes;
		} else {
			splitter1SplitSizes = calcSplitSizes(mainViewBounds.width, column5thViewBounds.width);
		}
		splitter2SplitSizes = calcSplitSizes(rowOfTopLeftBounds.height, rowOfBottomLeftBounds.height);
		splitter3SplitSizes = calcSplitSizes(rowOfTopLeftBounds.width, rowOfTopRightBounds.width);
		splitter4SplitSizes = calcSplitSizes(rowOfBottomLeftBounds.width, rowOfBottomRightBounds.width);

		const column5thViewVisible = (column5thView.style.visibility == "visible");

		var data = {
			"ch1":select1.options[select1.selectedIndex].text,
			"ch2":select2.options[select2.selectedIndex].text,
			"ch3":select3.options[select3.selectedIndex].text,
			"ch4":select4.options[select4.selectedIndex].text,
			"ch5":select5.options[select5.selectedIndex].text,
			"rssTextScrollVisible":rssTextScrollVisible,
			"lastUpdateLabelVisible":lastUpdateLabelVisible,
			"timersIconLabelsVisible":timersIconLabelsVisible,
			"splitter1Sizes":splitter1SplitSizes,
			"splitter2Sizes":splitter2SplitSizes,
			"splitter3Sizes":splitter3SplitSizes,
			"splitter4Sizes":splitter4SplitSizes,
			"column5thViewVisible":column5thViewVisible,
		};
		download(JSON.stringify(data), "configuration", "text/plain;charset=utf-8");
	};

	function toggleFullScreen() {

		const middleBar3 = document.getElementById("middleBarfBottomLeft");
		const middleBar4 = document.getElementById("middleBarfBottomRight");
		var doc = window.document;
		var docEl = doc.documentElement;

		var requestFullScreen = docEl.requestFullscreen || docEl.mozRequestFullScreen || docEl.webkitRequestFullScreen || docEl.msRequestFullscreen;
		var cancelFullScreen = doc.exitFullscreen || doc.mozCancelFullScreen || doc.webkitExitFullscreen || doc.msExitFullscreen;
		if(!doc.fullscreenElement && !doc.mozFullScreenElement && !doc.webkitFullscreenElement && !doc.msFullscreenElement) {
			middleBar3.style.visibility = "hidden";
			middleBar3.style.height = "0px";
			middleBar4.style.visibility = "hidden";
			middleBar4.style.height = "0px";
			requestFullScreen.call(docEl);
		} else {
			middleBar3.style.visibility = "visible";
			middleBar3.style.height = "28px";
			middleBar4.style.visibility = "visible";
			middleBar4.style.height = "28px";
			cancelFullScreen.call(doc);
		}
	};
</script>

<div class="allViews">

<!-- 4 views -->
<div data-role="splitter" data-split-mode="horizontal" data-gutter-size="5" data-split-sizes="80, 20" id="rootView" style="width: 100%; height: 100%; left: 0; top: 0; background-color: gray;">

<div data-role="splitter" data-split-mode="vertical" data-gutter-size="5" data-split-sizes="50, 50" id="mainView" style="width: 100%; height: 100%; left: 0; top: 0; background-color: gray;">
    <div data-role="splitter" data-split-mode="horizontal" data-gutter-size="5" data-split-sizes="50, 50" id="mainView12">
		<!-- Top-Left -->
        <div class="d-flex flex-column flex-justify-left" id="rowOfTopLeft">
			<div class="container" style="height:28px; max-height:28px; padding:0px;">
				<div class="grid">
					<div class="row no-gap">
						<div class="stub">
							<select id="selectCH1" class="channelSelect" onclick="this.setAttribute('value', this.value);" onchange="document.getElementById('iframeCH1').src = this.options[this.selectedIndex].value" value="">
							</select>
						</div>
						<div class="cell flex-justify-between">
							<div class="rssTextScroll" id="rssTextScroll"></div>
						</div>
						<div class="stub flex-align-end">
							<div title="Show/Hide the RSS scroll" class="icon" id="iconRSS"><img src="Icons/rss.png"/></div>
						</div>
					</div>
				</div>
			</div>
			<div class="container" style="height:100%; padding:0px;">
				<iframe id="iframeCH1" class="channels" style="position: relative; height: 100%; width: 100%;" src="" scrolling="yes" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
			</div>
		</div>
		<!-- Top-Right -->
        <div class="d-flex flex-column flex-justify-left" id="rowOfTopRight">
			<div class="container" style="height:28px; max-height:28px; padding:0px;">
				<div class="grid">
					<div class="row no-gap">
						<div class="stub">
							<select id="selectCH2" class="channelSelect" onclick="this.setAttribute('value', this.value);" onchange="document.getElementById('iframeCH2').src = this.options[this.selectedIndex].value" value="">
							</select>
						</div>
						<div class="cell flex-justify-between">
						</div>
						<div class="stub">
							<div title="Last update date & time" class="iconLabel" id="groupLastUpdate">Last Update:<div id="lastUpdate"></div></div>
						</div>
						<div class="stub">
							<div class="iconGroup" id="timersIconLabels">
								<div title="LOCAL TIME AT BOCACHICA" class="iconLabel" id="groupLOCAL">LOCAL<div id="timeLOCAL">00:00:00</div></div>
								<div title="UTC TIME" class="iconLabel" id="groupUTC">UTC<div id="timeUTC">00:00:00</div></div>
								<div title="YOUR CURRENT LOCAL TIME" class="iconLabel" id="groupTIME">TIME<div id="timeTIME">00:00:00</div></div>
							</div>
						</div>
						<div class="cell flex-justify-between">
						</div>
						<div class="stub flex-justify-end" id="optionsIcons">
							<div class="iconPopUp">
								<div title="Go to FullScreen" class="icon" id="iconFullScreen"><img src="Icons/fullscreen.png"/></div>
								<div title="Show/Hide 5th column" class="icon" id="icon5thColumn"><img src="Icons/column5th.png"/></div>
								<div title="Information about Us and this web site" class="icon" id="iconAboutUs"><img src="Icons/aboutus.png"/></div>
								<div title="You have any comment or idea?" class="icon" id="iconContact"><img src="Icons/contact.png"/></div>
								<div title="Save current configuration" class="icon" id="iconSave"><img src="Icons/save.png"/></div>
								<div title="Load saved configuration" class="icon" id="iconLoad"><img src="Icons/load.png"/></div>
								<div title="Show/Hide the clocks (LOCAL/UTC/YOUR CURRENT TIME)" class="icon" id="iconTime"><img src="Icons/time.png"/></div>
								<div title="Show/Hide last update information" class="icon" id="iconLastUpdate"><img src="Icons/lastUpdate.png"/></div>
							</div>
						</div>
						<div class="stub flex-justify-end">
							<div title="Options" class="icon" id="iconOptions"><img src="Icons/options.png"/></div>
						</div>
					</div>
				</div>
			</div>
			<div class="container" style="height:100%; padding:0px;">
				<iframe id="iframeCH2" class="channels" style="position: relative; height: 100%; width: 100%;" src="" scrolling="yes" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
			</div>
		</div>
    </div>
    <div data-role="splitter" data-split-mode="horizontal" data-gutter-size="5" data-split-sizes="50, 50" id="mainView34">
		<!-- Bottom-Left -->
        <div class="d-flex flex-column flex-justify-left" id="rowOfBottomLeft">
			<div class="container" style="height:28px; max-height:28px; padding:0px;" id="middleBarfBottomLeft">
				<div class="grid">
					<div class="row no-gap">
						<div class="stub">
							<select id="selectCH3" class="channelSelect" onclick="this.setAttribute('value', this.value);" onchange="document.getElementById('iframeCH3').src = this.options[this.selectedIndex].value" value="">
							</select>
						</div>
					</div>
				</div>
			</div>
			<div class="container" style="height:100%; padding:0px;">
				<iframe id="iframeCH3" class="channels" style="position: relative; height: 100%; width: 100%;" src="" scrolling="yes" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
			</div>
		</div>
		<!-- Bottom-Right -->
        <div class="d-flex flex-column flex-justify-left" id="rowOfBottomRight">
			<div class="container" style="height:28px; max-height:28px; padding:0px;" id="middleBarfBottomRight">
				<div class="grid">
					<div class="row no-gap">
						<div class="stub">
							<select id="selectCH4" class="channelSelect" onclick="this.setAttribute('value', this.value);" onchange="document.getElementById('iframeCH4').src = this.options[this.selectedIndex].value" value="">
							</select>
						</div>
					</div>
				</div>
			</div>
			<div class="container" style="height:100%; padding:0px;">
				<iframe id="iframeCH4" class="channels" style="position: relative; height: 100%; width: 100%;" src="" scrolling="yes" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
			</div>
		</div>
    </div>
</div>

<div class="d-flex flex-column flex-justify-left" id="column5thView" style="width: 100%; height: 100%; left: 0; top: 0; background-color: gray;">
	<div class="container" style="height:28px; max-height:28px; padding:0px;">
		<div class="grid">
			<div class="row no-gap">
				<div class="stub">
					<select id="selectCH5" class="channelSelect5th" onclick="this.setAttribute('value', this.value);" onchange="document.getElementById('iframeCH5').src = this.options[this.selectedIndex].value" value="">
					</select>
				</div>
				<div class="cell flex-justify-between">
				</div>
				<div class="stub flex-justify-end">
					<div title="Show/Hide 5th column" class="icon" id="icon5thColumnB"><img src="Icons/column5th.png"/></div>
				</div>
			</div>
		</div>
	</div>
	<div class="container" style="height:100%; padding:0px;">
		<iframe id="iframeCH5" class="channels" style="position: relative; height: 100%; width: 100%;" src="" scrolling="yes" frameborder="0" allow="clipboard-write; encrypted-media;" allowfullscreen></iframe>
	</div>
</div>

</div>

</div>

<!-- Main Entry Point -->
<script>
const select1 = document.getElementById("selectCH1");
const select2 = document.getElementById("selectCH2");
const select3 = document.getElementById("selectCH3");
const select4 = document.getElementById("selectCH4");
const select5 = document.getElementById("selectCH5");

const timeLOCAL = document.getElementById("timeLOCAL");
const timeUTC = document.getElementById("timeUTC");
const timeTIME = document.getElementById("timeTIME");

function composeYouTubeLiveStreamURL(videoId, muteDefault) {
	return "https://www.youtube.com/embed/"+videoId+"?autoplay=1&mute="+muteDefault;
}

const channels = {
 "Select one channel":"",

 // Live Streams
 "SPACEX":composeYouTubeLiveStreamURL("_qwLHlVjRyw", 0),
 
 "SpaceFlight":composeYouTubeLiveStreamURL("FpQwQx4Q_Dc", 0),
 "NSF Fleet Cam":composeYouTubeLiveStreamURL("gnt2wZBg89g", 1),
 
 "Lab Padre - Nerdle Cam 4K":composeYouTubeLiveStreamURL("Ky5l9ZxsG9M", 0),
 "Lab Padre - Sapphire Cam":composeYouTubeLiveStreamURL("dROdPn9Tpxg", 1),
 "Lab Padre - South Padre Island Pearl Beach Cam":composeYouTubeLiveStreamURL("agmFDeP5u_w", 1),
 "Lab Padre - Predator Cam":composeYouTubeLiveStreamURL("lTJ9OgcIMSs", 1),
 "Lab Padre - Lab Cam":composeYouTubeLiveStreamURL("hpqoqJxbNpw", 1),
 "Lab Padre - Launch Pad Cam":composeYouTubeLiveStreamURL("Z72Au8Px7mM", 1),
 "Lab Padre - Sentinel Cam":composeYouTubeLiveStreamURL("n5ozYnVQahE", 1),
 
 "Everyday Astronaut":composeYouTubeLiveStreamURL("QJ6YN5upGH0", 0),
 "SpaceX Storm (Spanish)":composeYouTubeLiveStreamURL("39T-NWgFtME", 0),
 "Marcus House":composeYouTubeLiveStreamURL("MkLpg5Rs8mI", 0),
 "What about it":composeYouTubeLiveStreamURL("QRRSvq5s0oE", 0),
 "NASA Live":composeYouTubeLiveStreamURL("21X5lGlDOfg", 0),
 "NASA Media Channel":composeYouTubeLiveStreamURL("nA9UZF-SZoQ", 0),

 "INFORMATION - Boca Chica, TX Weather":"weather.html",
 "INFORMATION - Flight Radar 24":"https://www.flightradar24.com/simple_index.php?lat=25.99&lon=-97.16&z=11&airports=1&label1=callsign&label2=altspeed&label3=tofrom&size=auto",
 "INFORMATION - Road Closures":"https://tfr.faa.gov/tfr2/list.jsp",
 "INFORMATION - Flight Restrictions Zone":"https://tfr.faa.gov/tfr_map_ims/html/ew/scale7/tile_33_61.html",
 "*INFORMATION - Cameron County":"https://www.cameroncounty.us/SpaceX",
 "*INFORMATION - Boca Chica":"https://www.bocachica.com",

 "*TWITTER":"https://twitter.com",
 "*REDDIT":"https://reddit.com",
 "*DISCORD":"https://discord.com", 
 "*YOUTUBE CHANNELS":"https://youtube.com",
 
 "SPACEX Web":"https://www.spacex.com",
 "SEARCH - Google":"https://www.google.com/search?igu=1&q=SpaceX",
 "SEARCH - Bing":"https://www.bing.com/search?q=SpaceX",
 "3D / VR Model of StarShip":"https://elricdog.github.io/SpaceX-StarShip/VRStarShip/",
 
 "ChangeLog":"changelog.html",
 "RoadMap":"roadmap.html",
 "Help":"help.html",
};

const channelsVertical = {
 "Select one channel":"",

 // Twitter timelines
 "My TWITTER SpaceX List":"twitter.html?list=elricdog",
 "TWITTER - SpaceX":"twitter.html?people=spacex",
 "TWITTER - Elon Musk":"twitter.html?people=elonmusk",
 "TWITTER - Jessie Anderson":"twitter.html?people=whoisheartbreak",
 "TWITTER - Mary":"twitter.html?people=BocaChicaGal",
 "TWITTER - Spaceflight Now":"twitter.html?people=SpaceflightNow",
 "TWITTER - Everyday Astronaut":"twitter.html?people=Erdayastronaut",
 "TWITTER - Austin Barnard":"twitter.html?people=austinbarnard45",
 "TWITTER - Chris B - NSF":"twitter.html?people=NASASpaceflight",
 "TWITTER - Jack Beyer":"twitter.html?people=thejackbeyer",
 "TWITTER - John Kraus":"twitter.html?people=johnkrausphotos",
 "TWITTER - Brendan (Diagram Creator)":"twitter.html?people=brendan2908",
 "TWITTER - SPadre":"twitter.html?people=SpacePadreIsle",
 "TWITTER - RGVAerialPhotography":"twitter.html?people=RGVaerialphotos",
 "TWITTER - SpaceX Català":"twitter.html?people=spacexcatala",
 "TWITTER - Ismael Flores (SpaceXStorm)":"twitter.html?people=ifcampoy",
 
 "*TWITTER":"https://twitter.com",
 "*REDDIT":"https://reddit.com",
 "*DISCORD":"https://discord.com", 
 "*YOUTUBE CHANNELS":"https://youtube.com",

 "SPACEX Web":"https://www.spacex.com",
 "SEARCH - Google":"https://www.google.com/search?igu=1&q=SpaceX",
 "SEARCH - Bing":"https://www.bing.com/search?q=SpaceX",
 
 "ChangeLog":"changelog.html",
 "RoadMap":"roadmap.html",
 "Help":"help.html",
};


// Populate selection channels
for (var key in channels) {
    var el = document.createElement("option");
    el.textContent = key;
    el.value = channels[key];
    if (select1!=null) select1.appendChild(el);
	if (select2!=null) select2.appendChild(el.cloneNode(true));
	if (select3!=null) select3.appendChild(el.cloneNode(true));
	if (select4!=null) select4.appendChild(el.cloneNode(true));
}
for (var key in channelsVertical) {
    var el = document.createElement("option");
    el.textContent = key;
    el.value = channelsVertical[key];
    if (select5!=null) select5.appendChild(el);
}

// Update Time
function updateDateTime() {
	let d = new Date();
	let currentTimeZoneOffsetInHours = d.getTimezoneOffset() / 60;

	let utc = new Date();
	utc.setHours( utc.getHours() + currentTimeZoneOffsetInHours );
	let local = new Date();
	local.setHours( local.getHours() + currentTimeZoneOffsetInHours - 6 );
	if (timeLOCAL!=null) timeLOCAL.innerHTML = local.toLocaleTimeString();
	if (timeUTC!=null) timeUTC.innerHTML = utc.toLocaleTimeString();
	if (timeTIME!=null) timeTIME.innerHTML = d.toLocaleTimeString();
}
var intervalId = window.setInterval(function(){
	updateDateTime();
}, 1000);
updateDateTime();

</script>
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-analytics.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-database.js"></script>
<script src="js/firebaseFunctions.js"></script>
</body>
</html>
